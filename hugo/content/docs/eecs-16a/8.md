---
title: "8: Capacitors & Capacitive Touchscreen"
weight: 8
---

{{< katex />}}


# 03/15 Capacitors

## Structure and Physics

{{< hint "info" >}}<!-- mathjax fix -->
See also, [7B 24](../physics-7b/24.md)
{{< /hint >}}

{{< columns >}}<!-- mathjax fix -->
- [Capacitors](https://en.wikipedia.org/wiki/Capacitor) is a circuit element that stores charge 
- Capacitors have an associated quantity, [**$C$apacitance**](https://en.wikipedia.org/wiki/Capacitance); the ratio of the amount of electric charge $Q$ stored on a conductor to a difference in electric potential $V$
    - Units: [Farads](https://en.wikipedia.org/wiki/Farad), $F = \frac{C}{V}$.
    - Depends on the physical geometry of a capacitor
        $$C = \varepsilon_0 \frac{A}{d}$$
        - $A$: Area of plates
        - $d$: Distance between plates
        - $\varepsilon_0$: [Permittivity](https://en.wikipedia.org/wiki/Permittivity) of [free space](https://en.wikipedia.org/wiki/Vacuum_permittivity), $8.854\cdot 10^{-12} \frac{\text{F}}{\text{m}}$
- Capacitors **do not have polarity**-- their orientation doesn’t impact their behavior. 
<---><!-- mathjax fix -->
>![](/docs/eecs-16a/8/cap.png)
>A physical diagram of a capacitor, with 2 metal plates and an insulator (called a [dielectric](https://en.wikipedia.org/wiki/Dielectric), commonly just air) between them
{{< /columns >}}

- The amount of charge $Q$ on a capacitor is related to its geometrical structure (capacitance $C$) and the voltage applied to it $V$:
    $$Q=CV$$
    - When we apply a voltage across the conductive plates, we create a potential difference, and so charges will build up on the plates
    - They will not build up indefinitely because this potential difference is not infinitely strong
    - At some point, an additional positive charge will be ambivalent about joining the plate; while there is a potential difference $V_+ − V_−$ between the plates attracting the charge, there are also repulsive forces from the charges that already exist on the plate
    - After this amount of critical charge forms on the plate, no additional charge will enter
- Geometry
    - The more the **$A$rea**, the more the total charge that can fit on the plate because the individual charges can spread out more, decreasing the repulsive forces
    - Smaller the **$d$istance between the plates**, the more strongly the $+$ and $−$ charges attract each other
        - That is, for the same voltage, decreasing the distance of plate separation increases the charge that will build up on the plate

{{< columns >}}<!-- mathjax fix -->
## Energy Storage

> When we apply a potential difference, charges build up on the plates; these charges are the reason that a capacitor stores energy. The repulsion between charges on a given plate means that moving a charge onto the plate takes energy (supplied by the voltage source). **The more charge already on a plate, the more energy it takes to push another charge on.**
<---><!-- mathjax fix -->
$$V = \frac{dE}{dQ}$$
$$dE = V dQ$$
$$dE = V \cdot d (CV)$$
$$\int dE = C \int_0^V V\ dV$$
$$ \Longrightarrow E = \frac{1}{2}CV^2$$
This is the energy of a capacitor when it is fully charged, holding
the complete $Q$ determined by $C$ and $V$.
{{< /columns >}}

## $I$-$V$ Relationship and Behavior

### Current

{{< columns >}}<!-- mathjax fix -->
$$Q = CV$$
$$\frac{dQ}{dt} = \frac{dCV}{dt}$$
$$ \Longrightarrow I = C \frac{dV}{dt}$$
- **Current is only flowing through the capacitor if the voltage across the capacitor is changing with time**
    - If the voltage is no longer changing, then the current through the capacitor will equal 0.
<---><!-- mathjax fix -->
![](/docs/eecs-16a/8/graph.png)
{{< /columns >}}

- If the voltage across it is constant, then the plates are already full of charge for that voltage
    - That is, any additional charge will feel the repulsive forces of the existing charges and will not want to enter the plate.
>  Note that the negative charges build up on the bottom plate; this happens because the positive charges on the top plate push the positive charges away from the bottom plate. This means that in reality, the charges entering the top plate are not the same exact physical charges that exit the bottom plate, but it doesn’t matter! From the perspective of the other circuit elements (and for our purposes), current flows just the same

### Voltage

{{< columns >}}<!-- mathjax fix -->
$$I = C \frac{dV}{dt}$$
$$I\ dt = C\ dV$$
$$\int I\ dt = \int_0^V C\ dV$$ 
$$It = C( V(t) - V(0)$$
$$V(t) = \frac{I}{C}t + V(0)$$
<---><!-- mathjax fix -->
![](/docs/eecs-16a/8/g2.png)
{{< /columns >}}
- To integrate the left-hand side, we assume that the current $I$ is _constant_ wrt time.


## Network Simplifications


{{< hint "info" >}}<!-- mathjax fix -->
Full derivations start [page 5](https://eecs16a.org/lecture/Note16.pdf#page=5)
{{< /hint >}}
{{< columns >}}<!-- mathjax fix -->

### Parallel
![](https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Capacitors_in_parallel.svg/220px-Capacitors_in_parallel.svg.png)
- Parallel capacitors share terminal nodes, thus the same applied voltage
    - Therefore, their capacitances add up:
    $$C_{eq} = \sum_i C_i = C_1 + \dots + C_n$$
- Intuitively, charge is apportioned among them by size.
    ![](https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/Kondensator_C1_plus_C2.svg/220px-Kondensator_C1_plus_C2.svg.png)
<---><!-- mathjax fix -->
### Series
![](https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Capacitors_in_series.svg/220px-Capacitors_in_series.svg.png)
- Series capacitors have the same current through them by KCL
- The entire series acts as a capacitor smaller than any of its components:
$$ \frac{1}{C_{eq}} = \sum_i \frac{1}{C_i} = \frac{1}{C_1} + \dots + \frac{1}{C_n}$$
- The inner middle two plates carry equal and opposite amounts of charge, so their net contribution to charge storage is $0$
- Intuitively, the separation distance, rather than plate area, adds up
    ![](https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/Kondensator_C1_C2_Reihe.svg/220px-Kondensator_C1_C2_Reihe.svg.png)
{{< /columns >}}
> **Note:** The parallel operator $\parallel$ is just a mathematical tool; it happened to describe the equivalence for resistors in parallel but the operator actually applies to capacitors in series. As with resistors in parallel, capacitors in series are best simplified pairwise; that is, for a system with capacitors in series can be simplified as $C_{eq} = C_1 \parallel C_2 = \frac{C_1 C_2}{C_1 + C_2}$

# 03/18 Capacitive Touchscreen


- When there is touch, we form a capacitor
    > It is worth noting that there is capacitance everywhere because everything is a conductor (to some extent). There is capacitance between your fingers and your laptop keys, your fingers and our phone, and (to a much lesser extent) you and Pluto!

## Measuring $V$ or $I$

{{< figure  src="/docs/eecs-16a/8/touch.png" >}}

{{< columns >}}<!-- mathjax fix -->
- When we have no touch, we have an open circuit so we only have $C_0$
- When we do touch, we close the circuit so $C_1$ and $C_2$ both begin charging: 
$$C_0 + C_1 \parallel C_2$$
$$C_0 + \frac{C_1 C_2}{C_1 + C_2}$$
$$C_0 + \Delta C$$
$$C_0 + C_{eq}$$
<---><!-- mathjax fix -->
![](/docs/eecs-16a/8/touch2.png)
{{< /columns >}}


{{< columns >}}<!-- mathjax fix -->
- Assuming $V_{out}(0) = 0$
$$I_S = C_{eq} \frac{d V_{out}(t)}{dt}$$
$$V_{out} = \int_0^t \frac{I_S}{C_{eq}}dt$$
$$\dots = \frac{I_s t }{C_{eq}}$$
$$ \Longrightarrow C_{eq} = \frac{I_S t}{V_{out}} $$
<---><!-- mathjax fix -->
![](/docs/eecs-16a/8/op1.png)
Downside: Can't to build a current source easily
{{< /columns >}}

## Measuring $\Delta C$

{{< columns >}}<!-- mathjax fix -->
### Attempt 1

Doesn't work: $V_{out} = V_s$ regardless of if there is a touch or not
<---><!-- mathjax fix -->
![](/docs/eecs-16a/8/cap1.png)
{{< /columns >}}

### Attempt 2

{{< columns >}}<!-- mathjax fix -->
**Phase 1:** Close $s_1$, open $s_2$
$$Q = V_S = C_{eq}$$
![](/docs/eecs-16a/8/cap2.png)
<---><!-- mathjax fix -->
**Phase 2:** Close $s_2$, open $s_1$
- [Charge sharing](https://en.wikipedia.org/wiki/Charge_sharing), unknown initial conditions
![](/docs/eecs-16a/8/cap22.png)
{{< /columns >}}


### Attempt 3

{{< columns >}}<!-- mathjax fix -->
**Phase 1:** Close $s_1, s_3$, open $s_2$
- Charge $C_{eq}$
$$Q_{ref} = C_{ref} \cdot V_{out} = 0$$
- Discharge $C_{ref}$
$$Q_{eq} = C_{eq} \cdot V_S$$
![](/docs/eecs-16a/8/cap31.png)

By conservation of energy
$$Q_{total 1} = Q_{total 2}$$
$$C_{eq} \cdot V_S = C_{eq} \cdot V_{out} + C_{ref} \cdot V_{out}$$ 
$$ \Longrightarrow V_{out} = \frac{C_{eq}}{C_{eq} + C_{ref}} V_S$$
therefore, when touching we change voltage!

<---><!-- mathjax fix -->
**Phase 2:** Close $s_2$, open $s_1, s_3$
- $V_{C_{eq}} = V_{out}$
- $V_{C_{ref}} = V_{out}$

$$Q_{total 2} = C_{eq} \cdot V_{out} + C_{ref} \cdot V_{out}$$

![](/docs/eecs-16a/8/cap32.png)

![](/docs/eecs-16a/8/vout.png)

{{< /columns >}}


## Dependent Sources

> As briefly mentioned before, the voltage and current sources covered so far have been independent sources, meaning they have a constant, fixed value. However, [dependent sources](https://en.wikipedia.org/wiki/Dependent_source) also generate currents and voltages but their output depends on some other "controlling" current .$i_x$ or voltage .$v_x$ in the circuit.

{{< columns >}}<!-- mathjax fix -->
>**VCVS:** Voltage-controlled voltage source
>![](https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/Voltage_controlled_voltage_source_circuit.svg/200px-Voltage_controlled_voltage_source_circuit.svg.png)
>* .$V = f_a (v_x)$
>* [Unitless](https://en.wikipedia.org/wiki/Dimensionless_quantity).$^1$ voltage gain .$a$
>* E.x. [Voltage amplifier](https://en.wikipedia.org/wiki/Amplifier#Ideal)
>* Input, output impedance: .$\infty, 0$

>**CCCS:** Current-controlled current source
>![](https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/Current_controlled_current_source.svg/200px-Current_controlled_current_source.svg.png)
>* .$I = f_c (i_x)$
>* [Unitless](https://en.wikipedia.org/wiki/Dimensionless_quantity).$^1$ voltage gain .$c$
>* E.x. [Current amplifier](https://en.wikipedia.org/wiki/Amplifier#Ideal)
>* Input, output impedance: .$0, \infty$

$^1$The proportionality constant between dependent and independent variables is unit/dimension-less if they are both currents (or both voltages)
<---><!-- mathjax fix -->
>**VCCS:** Voltage-controlled current source
>![](https://upload.wikimedia.org/wikipedia/commons/thumb/8/8e/Voltage_controlled_current_source.svg/200px-Voltage_controlled_current_source.svg.png)
>* .$I = f_b (v_x)$
>* Units: [Siemens](https://en.wikipedia.org/wiki/Siemens_(unit)), .$S$; .$\Omega^{-1}, \mho$
>* E.x. [Transconductance](https://en.wikipedia.org/wiki/Transconductance) amplifier with conductance .$b$
>* Input, output impedance: .$\infty, \infty$

>**CCVS:** Current-controlled voltage source
>![](https://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Current_controlled_voltage_source.svg/200px-Current_controlled_voltage_source.svg.png)
>* .$V = f_d (i_x)$
>* Unit: Ohms
>* E.x. [Transresistor](https://en.wikipedia.org/wiki/Transconductance#Transresistance) with resistance .$d$
>* Input, output impedance: .$0, 0$
{{< /columns >}}



## Op-Amp

- An [op-amp](https://en.wikipedia.org/wiki/Operational_amplifier) (operational amplifier) is a device that transforms a small voltage difference into a very large voltage difference.

{{< columns >}}<!-- mathjax fix -->
- Made up of...
    - Two input terminals with potentials $V_+$ (non-inverting) and $V_−$ (inverting)
    - Two power supply terminals $V_{DD}$ (positive power supply) and $V_{SS}$ (negative power supply)
    - One output terminal with potential $U_{out}$
- Ideally, $A = \infty$ so we could reach any voltage
    $$V_{out} = V_{SS} + \frac{V_{DD} - V_{SS}}{2} + A (V_+ - V_-)$$
    $$\dots = \frac{V_{DD} + V_{SS}}{2} + A (V_+ - V_-)$$
    - $A$ is the [gain](https://en.wikipedia.org/wiki/Gain_(electronics)) of the amplifier
<---><!-- mathjax fix -->
>![](/docs/eecs-16a/8/sym.png)
<!-- >$V_{DD}$ represents the maximum voltage that this op-amp can output and $V_{SS}$ represents the minimum; if not specified, it is often implicit that there is no such limit. -->

>![](/docs/eecs-16a/8/op.png)
{{< /columns >}}

## Comparator

{{< columns >}}<!-- mathjax fix -->
- **[Comparator](https://en.wikipedia.org/wiki/Comparator):** Optimized for binary output and speed
    - Enables us to take a voltage measurement and convert it to a binary signal
$$V_{out} = V_{DD} \iff V_+ > V_{DD}$$
$$V_{out} = V_{SS} \iff V_+ < V_{SS}$$
<---><!-- mathjax fix -->
![](/docs/eecs-16a/8/comp.png)
{{< /columns >}}

{{< figure  src="/docs/eecs-16a/8/cc.png" >}}
